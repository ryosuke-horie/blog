---
title: AWS CodeBuildの実行時間の短縮
pubDate: 2023-12-11
description: 'AWS CodeBuildのビルド実行時間を短縮するための施策を調査・検証した内容。'
---

AWS CodeBuildのビルド実行時間を短縮するための施策を調査・検証した内容をまとめます。

## 参考にした最適化手法

- **BuildKitの有効化**: 環境変数でDocker_BUILDKITを1に設定し、依存関係のないレイヤを並列処理
- **ローカルキャッシュ利用**: Dockerレイヤとgitメタデータをキャッシュ
- **カスタムイメージ使用**: 必要なライブラリを事前に用意
- **リソース増強**: メモリとvCPUの仕様向上

## 実際の検証結果

1. **BuildKit有効化**: 3分10～20秒 → 3分程度（微短縮）
2. **OSをAmazonLinuxからUbuntuに変更**: 約1分短縮され2分14秒に
3. **メモリ/CPU増強**: 3GB/2vCPU → 7GB/4vCPUで1分56秒に短縮

## 結論

CodeBuildの実行時間に対して効果が大きかった順に並べると、以下の通りです。

1. 実行環境イメージ変更
2. スペック向上
